<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fepeo.boot.festival.model.mapper.FestivalMapper">
	
	<insert id="insertFestival" parameterType="Festival">
        INSERT INTO FESTIVAL 
        VALUES (
            SEQ_FESTIVAL_NO.NEXTVAL,
            #{festivalName},
            #{festivalStartDate},
            #{festivalEndDate},
            #{festivalFileName},
            #{festivalFileRename},
            #{festivalFilePath},
            #{festivalPhone},
            #{festivalAddress},
            #{festivalDetailAddress},
            #{mapVCode},
            #{mapHcode}
        )
    </insert>

    <select id="selectFestivalList" resultType="com.fepeo.boot.festival.model.vo.Festival" parameterType="map">
	    SELECT * FROM (
	        SELECT f.*, ROWNUM AS rnum
	        FROM (
	            SELECT 
	                FESTIVAL_NO, FESTIVAL_NAME, FESTIVAL_START_DATE, FESTIVAL_END_DATE,
	                FESTIVAL_FILE_NAME, FESTIVAL_FILE_RENAME, FESTIVAL_FILE_PATH,
	                FESTIVAL_PHONE, FESTIVAL_ADDRESS, FESTIVAL_DETAIL_ADDRESS,
	                MAP_V_CODE, MAP_H_CODE
	            FROM FESTIVAL WHERE FESTIVAL_FILE_PATH IS NOT NULL
	            ORDER BY FESTIVAL_START_DATE DESC
	        ) f
	        WHERE ROWNUM &lt;= #{endRow}
	    )
	    WHERE rnum &gt;= #{startRow}
	</select>
	<select id="selectFestivalByNo" resultType="com.fepeo.boot.festival.model.vo.Festival">
		SELECT * FROM FESTIVAL WHERE FESTIVAL_NO = #{festivalNo}
	</select>
	<select id="getTotalCount" resultType="int">
	    SELECT COUNT(*) FROM FESTIVAL
	</select>
</mapper>