<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fepeo.boot.chat.model.mapper.ChatMapper">

	<insert id="insertChatRoom">
		insert into CHATROOM values (
		SEQ_CHATROOM_NO.nextval, #{memberNo}, #{chatroomTitle},#{tag1},#{tag2},#{tag3},
		#{chatImgName},#{chatImgRename},#{chatImgPath},#{chatLimit}, default	)
	</insert>
	
	<delete id="deleteCahtRoom">
		delete from CHATROOM where CHATROOM_NO = #{chatroomNo}
	</delete>
	
	<update id="updateChatMember">
		update CHATROOM set CHAT_MEMBER_COUNT = CHAT_MEMBER_COUNT + 1
		where CHATROOM_NO = #{chatroomNo}
	</update>
		
	<update id="subtractionChatMember">
		update CHATROOM set CHAT_MEMBER_COUNT = CHAT_MEMBER_COUNT - 1
		where CHATROOM_NO = #{chatroomNo}
	</update>
		
	<!-- 전체리스트 출력 -->
	<select id="selectChatRoomList" resultType="com.fepeo.boot.chat.model.vo.ChatRoom">
		select * from CHATROOM
	</select>
<!-- 	
	<select id="selectChatRoomListByNo" resultType="com.fepeo.boot.chat.model.vo.ChatRoom">
		select * from CHATROOM where MEMBER_NO = #{memberNo} 방장
	</select> -->
	
	<!-- 가입인원수 -->
	<select id="selectChatMember" resultType="com.fepeo.boot.chat.model.vo.ChatRoom">
		select CHAT_MEMBER_COUNT from CHATROOM where CHATROOM_NO = #{chatroomNo}
	</select>
	<!-- 채팅방 정보 가져오기  -->
	<select id="selectChatRoomByNo" resultType="com.fepeo.boot.chat.model.vo.ChatRoom">
		 SELECT * FROM CHATROOM WHERE CHATROOM_NO = #{chatroomNo}
	</select>
	<!-- 내가 속한 채팅방 정보 가져오기 -->
	<select id="selectMyChatRoomListByChatMember" resultType="ChatRoom">
		SELECT * FROM CHATROOM WHERE CHATROOM_NO = #{chatroomNo}
	</select>
</mapper>  